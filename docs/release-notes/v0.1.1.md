# Neatoo 0.1.1

**Release Date:** 2026-01-01
**Type:** Feature Release
**Breaking Changes:** No

---

## Summary

This release adds C# record support for Value Objects via RemoteFactory 10.1.1, enabling cleaner syntax with `[Create]` on record type declarations.

---

## What's New

### Record Support for Value Objects

Records can now use `[Create]` directly on the type declaration instead of requiring an explicit constructor:

```csharp
[Factory]
[Create]
public record Address(string Street, string City, string State, string ZipCode);

// Generated factory:
// IAddressFactory.Create(string Street, string City, string State, string ZipCode)
```

### Service Injection in Primary Constructors

The `[Service]` attribute works in positional record parameters:

```csharp
[Factory]
[Create]
public record AuditedValue(string Value, [Service] IAuditService Audit);

// Factory signature: IAuditedValueFactory.Create(string Value)
// IAuditService is injected from DI, not passed as parameter
```

### Fetch Operations on Records

Static `[Fetch]` methods work with records, including remote operations:

```csharp
[Factory]
[Create]
public record Currency(string Code, string Name, string Symbol)
{
    // Local fetch
    [Fetch]
    public static Currency FetchByCode(string code)
        => code switch
        {
            "USD" => new Currency("USD", "US Dollar", "$"),
            "EUR" => new Currency("EUR", "Euro", "â‚¬"),
            _ => throw new ArgumentException($"Unknown currency: {code}")
        };

    // Remote fetch with service injection
    [Fetch]
    [Remote]
    public static async Task<Currency> FetchFromDatabaseAsync(
        string code,
        [Service] ICurrencyRepository repo)
    {
        return await repo.GetByCodeAsync(code);
    }
}
```

### Record Constraints

| Record Type | Supported? | Notes |
|-------------|------------|-------|
| Positional record | Yes | Use `[Create]` on type |
| Record with explicit constructor | Yes | Use `[Create]` on constructor |
| `record struct` | No | NF0206 error - value types not supported |
| Generic record | No | Not supported |
| Abstract record | No | Not supported |

---

## Bug Fixes

- **AsyncTasksTests race condition** - Fixed test `AddTask_WhileSequencerHasPendingTasks_TaskIsTracked` that failed on Linux due to faster task scheduler execution

---

## Dependencies

| Package | Version | Notes |
|---------|---------|-------|
| Neatoo.RemoteFactory | 10.1.1 | Record support with `[Create]` on type |

---

## Documentation Updates

- Added Value Objects vs Input Objects distinction in M2 documentation
- Updated DDD documentation to follow new guidelines (assume DDD expertise)
- Created RemoteFactory record support update plan

---

## Related Documentation

- [Value Objects and Input Objects](../todos/M2-value-object-base.md)
- [RemoteFactory Record Support](../todos/remotefactory-record-support-update.md)
