# Neatoo 0.7.1

**Release Date:** 2026-01-11
**Type:** Patch Release (Performance)
**Breaking Changes:** None

---

## Summary

This release adds caching for `IsValid`, `IsBusy`, and `IsModified` properties in list base classes. Previously these properties iterated all children on every access (O(n)). With caching, most operations are O(1).

---

## Performance Improvement

### Problem

`ValidateListBase.IsValid`, `ValidateListBase.IsBusy`, and `EntityListBase.IsModified` were computed properties that iterated ALL children on every access:

```csharp
// Previous implementation - O(n) on every access
public bool IsValid => !this.Any(c => !c.IsValid);
public bool IsBusy => this.Any(c => c.IsBusy);
public bool IsModified => this.Any(c => c.IsModified) || this.DeletedList.Any();
```

When `CheckIfMetaPropertiesChanged()` is called (on every child PropertyChanged), this triggered O(n) iteration. With large lists and frequent property changes, this became expensive.

### Solution

Cache the boolean result and update it intelligently based on child state transitions:

| Child became | List was | Action needed |
|--------------|----------|---------------|
| Invalid | Valid | Set cache to false (O(1)) |
| Invalid | Invalid | No change needed (O(1)) |
| Valid | Valid | No change needed (O(1)) |
| Valid | Invalid | Check if others still invalid (O(k) where k = first invalid) |

The `Any()` short-circuits, so even when iteration is needed, it stops at the first match.

### Impact

For a list with 1000 items where 100 items rapidly toggle between valid/invalid states:

- **Before:** 2000 state changes Ã— O(1000) = ~2,000,000 iterations
- **After:** Most operations O(1), worst case O(k) where k < n

---

## Files Changed

- `src/Neatoo/ValidateListBase.cs` - Added `_cachedIsValid`, `_cachedIsBusy` fields with intelligent updates
- `src/Neatoo/EntityListBase.cs` - Added `_cachedChildrenModified` field with intelligent updates

---

## Tests Added

28 new tests covering caching behavior:

- **Edge case tests:** SetItem replacements, pause/resume, rapid state changes
- **Large list tests:** 500-1000 item lists with various operations

---

## Migration Guide

**No action required.** All changes are internal performance improvements with no API changes.
